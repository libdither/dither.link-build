<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Distance-Based Routing - Dither Ideas</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../../favicon.svg">
        
        
        <link rel="shortcut icon" href="../../favicon.png">
        
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        
        <link rel="stylesheet" href="../../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../dither.html"><strong aria-hidden="true">1.</strong> Dither</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">1.1.</strong> Routing</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dither/routing/distance-based-routing.html" class="active"><strong aria-hidden="true">1.1.1.</strong> Distance-Based Routing</a></li><li class="chapter-item expanded "><a href="../../dither/routing/directional-trail-search.html"><strong aria-hidden="true">1.1.2.</strong> Directional Trail Search</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.2.</strong> Data</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dither/data/reverse-hash-lookup.html"><strong aria-hidden="true">1.2.1.</strong> Data</a></li><li class="chapter-item expanded "><a href="../../dither/data/zero-knowledge-proofs.html"><strong aria-hidden="true">1.2.2.</strong> Data</a></li><li class="chapter-item expanded "><a href="../../dither/data/user-management.html"><strong aria-hidden="true">1.2.3.</strong> Data</a></li></ol></li><li class="chapter-item expanded "><a href="../../dither.html"><strong aria-hidden="true">1.3.</strong> Consensus</a></li></ol></li><li class="chapter-item expanded "><a href="../../disp/disp.html"><strong aria-hidden="true">2.</strong> Disp</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../disp/expr.html"><strong aria-hidden="true">2.1.</strong> Core Expressions</a></li><li class="chapter-item expanded "><a href="../../disp/lambda-trees.html"><strong aria-hidden="true">2.2.</strong> Lambda Trees</a></li><li class="chapter-item expanded "><a href="../../disp/type-system.html"><strong aria-hidden="true">2.3.</strong> Type System</a></li><li class="chapter-item expanded "><a href="../../disp/provable-hardware-modeling.html"><strong aria-hidden="true">2.4.</strong> Provable Hardware Modeling</a></li></ol></li><li class="chapter-item expanded "><a href="../../applications.html"><strong aria-hidden="true">3.</strong> Applications</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../applications/dither-chat.html"><strong aria-hidden="true">3.1.</strong> Dither Chat</a></li><li class="chapter-item expanded "><a href="../../applications/dithca.html"><strong aria-hidden="true">3.2.</strong> Dithca</a></li><li class="chapter-item expanded "><a href="../../applications/dithca.html"><strong aria-hidden="true">3.3.</strong> Dithix</a></li><li class="chapter-item expanded "><a href="../../applications/d-framework/d-framework.html"><strong aria-hidden="true">3.4.</strong> D Framework</a></li><li class="chapter-item expanded "><a href="../../applications/protocol-of-truth/protocol-of-truth.html"><strong aria-hidden="true">3.5.</strong> Protocol of Truth</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../applications/protocol-of-truth/examples.html"><strong aria-hidden="true">3.5.1.</strong> Protocol of Truth</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../copyright-is-cancer.html"><strong aria-hidden="true">4.</strong> Copyright is Cancer</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Dither Ideas</h1>

                    <div class="right-buttons">
                        
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="distance-based-routing"><a class="header" href="#distance-based-routing">Distance Based Routing</a></h1>
<p>The goal of Distance Based Routing (DBR) is to obfuscate connections between computers on the Dither network. It works similarly to I2P &amp; TOR, but is vastly improved by taking into account where proxy nodes are, instead of randomly selecting proxy nodes. It also allows for you to choose the trade-off between anonymity and speed.</p>
<ul>
<li>Bandwidth Trading</li>
<li>Configurable Routing
<ul>
<li>Network Traversal</li>
<li>Network Searching</li>
<li>Onion Routing</li>
<li>Routing Wormholes</li>
</ul>
</li>
</ul>
<h2 id="network-organization"><a class="header" href="#network-organization">Network Organization</a></h2>
<p>The idea behind network organization is to be able to create a network that reflects the real-world positions of the computers. This is so that it is easy to calculate the latency between different locations in the network and to optimise routing paths.</p>
<p>Note: You can also read the network organization <a href="https://www.dither.link/papers/distance-based-routing-whitepaper.pdf">research paper</a> (or don't, its not that good)</p>
<h2 id="routing-coordinates"><a class="header" href="#routing-coordinates">Routing Coordinates</a></h2>
<p>One of the main ideas behind Distance-based routing is to replace conventional IP addresses with a less structural addressing system. Instead of using an IP address to try to get the routing tables of the internet to route your data where you want it, Routing Coordinates allow for a less metadata-intensive way to route packets: instead of consulting extensive routing tables, all nodes have to do is route packets to a nodes closer to the packet's destination routing coordinates. This conveniently allows for keeping your IP address private, allowing for better protection against Denial of Service attacks.</p>
<p>Unfortunately, there are drawbacks. Routing Coordinates are spatial coordinates that represent the <em>latency topology</em> of a network. Because light travels at the speed of light, this latency topology reflects real-world connections between computers and their relative locations in the world. This allows for the unfortunate possibility that with a sufficiently informed attacker, the precise real-world location of a device could be deduced from its routing coordinates. To deal with this Dither uses Onion Routing by default when connecting to any peers not specifically trusted.</p>
<h2 id="onion-routing"><a class="header" href="#onion-routing">Onion Routing</a></h2>
<p>Conventionally, onion routing is an incredibly slow strategy because of how peers are typically selected in the network. However, with Routing Coordinates, peers directly along the path of the packet can be selected to allow for very minimal overhead. (in addition, the <a href="https://arxiv.org/abs/1507.05724v3">HORNET</a> protocol will be used for its incredibly efficient symmetric encryption scheme).</p>
<h2 id="bootstrapping"><a class="header" href="#bootstrapping">Bootstrapping</a></h2>
<p>The by which a new node joins the network is as follows:</p>
<ul>
<li>The new node first needs to bootstrap off of at least one existing node.</li>
<li>This existing node sends the new node a set of peer <code>Address</code>es selected based on how close they might be to the requesting node (this will represent a ring of nodes roughly a constant distance away from the existing node, this constant distance being the latency between the existing node and the new node).
<ul>
<li>In the case that the existing node has not been bootstrapped, it will notify the requesting node as such, and if the requesting node continues the connection, it will set its own Routing Coordinates to the origin of the coordinate space.</li>
</ul>
</li>
<li>Assuming the existing node has at least one peer, the connecting node can accomplish the Local Peer Protocol.</li>
<li>The new node takes the set of peer <code>Address</code>es that were received from the existing node and pings them, measuring connection latency to all of them. The new node queries the existing nodes with the closest latencies for their sets of peers, and repeats until a set of nodes has been aquired ordered by their latency from the new node.</li>
<li>The node choses peers for it's &quot;active set&quot;, by default this is a few hundred of its closest nodes.</li>
<li>The new node then uses <a href="https://en.wikipedia.org/wiki/True-range_multilateration">True-range multilateration</a> on the closest nodes of its active set to calculate its own Routing Coordinate and then broadcasts this routing coordinate to its active set.</li>
<li>This concludes the bootstrapping process and the node can now use its routing coordinate as a temporary address on the network.</li>
</ul>
<h2 id="conflicting-networks"><a class="header" href="#conflicting-networks">Conflicting Networks</a></h2>
<p>It is possible, (although unlikely) for two or more incompatible latency topologies to be formed in separate places. This can happen relatively easily if, say, two Dither networks formed independently on isolated networks and then these networks connected to each other. A solution to this problem is still in the works, however, this solution will most likely have to be a system that syncronizes itself.</p>
<h2 id="routing-techniques"><a class="header" href="#routing-techniques">Routing Techniques</a></h2>
<p>There are many possible routing techniques that could be built on top of Routing Coordinates, here is a list of some of the default ones:</p>
<ul>
<li>Default Routing
<ul>
<li>This uses the underlying networking protocol (i.e. Ipv4 or Ipv6) to send data to and from some address.</li>
</ul>
</li>
<li>Traversal Routing
<ul>
<li>A packet using this routing method contains a destination routing coordinate. When a node receives a packet using this routing method, it simply sends the the packet to whatever node in it's active set that is closer to the destination.</li>
</ul>
</li>
<li>Proxy Routing (i.e. Onion Routing)
<ul>
<li>Multiple nodes in the network are selected to temporarily proxy packets to their destination.</li>
<li>Chains of these proxies can be formed with Onion Routing support to create re-usable network proxies. </li>
</ul>
</li>
<li>Locality Routing
<ul>
<li>This is a method to protect the exact location of a node.</li>
<li>All the nodes within a certain area in the routing coordinate space are instructed to route any packets they receive with a specific ID to a certain node in the space.</li>
</ul>
</li>
</ul>
<h2 id="bandwidth-trading"><a class="header" href="#bandwidth-trading">Bandwidth Trading</a></h2>
<p>Proxying protocols that rely on the goodwill of peers to route packets typically have only a small number of willing peers to route (ex: TOR). This is why protocols like BitTorrent, I2P and IPFS have systems in place that require peers to play fair and contribute back to the network.</p>
<p>To accomplish this behavior for Dither there are some potential solutions:</p>
<ul>
<li>A node records how much data has been forwarded through itself from each node in it's &quot;active set&quot; and uses nodes that use it the most for traversal. </li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../dither.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../dither/routing/directional-trail-search.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../dither.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../dither/routing/directional-trail-search.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
