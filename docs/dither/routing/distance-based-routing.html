<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Distance-Based Routing - Dither Ideas</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../../favicon.svg">
        
        
        <link rel="shortcut icon" href="../../favicon.png">
        
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        
        <link rel="stylesheet" href="../../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../dither.html"><strong aria-hidden="true">1.</strong> Dither</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dither/structure.html"><strong aria-hidden="true">1.1.</strong> Structure</a></li><li class="chapter-item expanded "><a href="../../dither/routing/distance-based-routing.html" class="active"><strong aria-hidden="true">1.2.</strong> Distance-Based Routing</a></li><li class="chapter-item expanded "><a href="../../dither/routing/directional-trail-search.html"><strong aria-hidden="true">1.3.</strong> Directional Trail Search</a></li><li class="chapter-item expanded "><a href="../../dither/data/reverse-hash-lookup.html"><strong aria-hidden="true">1.4.</strong> Reverse Hash Lookup</a></li><li class="chapter-item expanded "><a href="../../dither/data/zero-knowledge-proofs.html"><strong aria-hidden="true">1.5.</strong> Zero Knowledge Proofs</a></li><li class="chapter-item expanded "><a href="../../dither/data/user-management.html"><strong aria-hidden="true">1.6.</strong> User Management</a></li><li class="chapter-item expanded "><a href="../../dither.html"><strong aria-hidden="true">1.7.</strong> Consensus</a></li></ol></li><li class="chapter-item expanded "><a href="../../disp/disp.html"><strong aria-hidden="true">2.</strong> Disp</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../disp/expr.html"><strong aria-hidden="true">2.1.</strong> Core Expressions</a></li><li class="chapter-item expanded "><a href="../../disp/lambda-trees.html"><strong aria-hidden="true">2.2.</strong> Lambda Trees</a></li><li class="chapter-item expanded "><a href="../../disp/type-system.html"><strong aria-hidden="true">2.3.</strong> Type System</a></li><li class="chapter-item expanded "><a href="../../disp/provable-hardware-modeling.html"><strong aria-hidden="true">2.4.</strong> Provable Hardware Modeling</a></li><li class="chapter-item expanded "><a href="../../disp/hashtypes/hashtypes.html"><strong aria-hidden="true">2.5.</strong> Hashtypes</a></li></ol></li><li class="chapter-item expanded "><a href="../../applications.html"><strong aria-hidden="true">3.</strong> Applications</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../applications/application-design-philosophy.html"><strong aria-hidden="true">3.1.</strong> Design Philosophy</a></li><li class="chapter-item expanded "><a href="../../applications/dither-chat.html"><strong aria-hidden="true">3.2.</strong> Chat Client - Dither Chat</a></li><li class="chapter-item expanded "><a href="../../applications/dithca.html"><strong aria-hidden="true">3.3.</strong> Comment System - Dithca</a></li><li class="chapter-item expanded "><a href="../../applications/dithca.html"><strong aria-hidden="true">3.4.</strong> Package Manager - Dithix</a></li><li class="chapter-item expanded "><a href="../../applications/protocol-of-truth/protocol-of-truth.html"><strong aria-hidden="true">3.5.</strong> Protocol of Truth</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../applications/protocol-of-truth/examples.html"><strong aria-hidden="true">3.5.1.</strong> Usage Examples (WIP)</a></li></ol></li><li class="chapter-item expanded "><a href="../../applications/dither-coin.html"><strong aria-hidden="true">3.6.</strong> Not your typical Cryptocurrency - Dither Coin</a></li><li class="chapter-item expanded "><a href="../../applications/d-framework/d-framework.html"><strong aria-hidden="true">3.7.</strong> Browser Alternative - D Framework</a></li></ol></li><li class="chapter-item expanded "><a href="../../future-vision.html"><strong aria-hidden="true">4.</strong> Future Vision of Dither</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Articles</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../copyright-is-cancer.html"><strong aria-hidden="true">5.1.</strong> Copyright is Cancer</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Dither Ideas</h1>

                    <div class="right-buttons">
                        
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="distance-based-routing"><a class="header" href="#distance-based-routing">Distance Based Routing</a></h1>
<p>Distance Based Routing (DBR) is a protocol to obfuscate connections between computers on the Dither network. It improves on speed and flexibility over existing solutions (i.e. I2P and TOR) by taking into account the latency between nodes on the network. Instead of having to randomly choose nodes from a list to route through, by knowing the relative latencies of nodes, routing paths between nodes can be chosen to optimize for low-latency or anonymity, or a balance of both.</p>
<p>Note: There is a <a href="https://www.dither.link/papers/distance-based-routing-whitepaper.pdf">research paper</a> comparing DBR to existing random-route solutions, for a somewhat amateurish comparison.</p>
<h2 id="the-main-idea"><a class="header" href="#the-main-idea">The Main Idea</a></h2>
<p>To figure out the relative latencies between nodes so as to establish low-latency paths to a destination, DBR makes the observation that the latency between nodes is roughly correlated to the physical distance between them. This means coordinates can be assigned to nodes such that the latencies between nodes can be estimated as the euclidian distance between coordinates. These coordinates will be referred to as &quot;routing coordinates&quot;.</p>
<h2 id="network-organization"><a class="header" href="#network-organization">Network Organization</a></h2>
<p>To assign coordinates to nodes, there is a process of self-organization that functions as follows. This process happens whenever a new node joins the network.</p>
<ol>
<li>New node bootstraps onto the network via 1 or more existing nodes.</li>
<li>New node tests response times (latency) to existing nodes. </li>
<li>New node requests for new peers from existing nodes.</li>
<li>Existing nodes notify some slice of their peers that a new node would like new peers.</li>
<li>Notified nodes initiate connection with new node and each node measures latency.</li>
<li>New node takes note of the smallest latencies and goes back to step 3 until there are no closer nodes who want to peer.</li>
<li>After a certain number of closest nodes are found whose latency measurements are stable, the new node then calculates its own routing coordinates via <a href="https://en.wikipedia.org/wiki/True-range_multilateration">multilateration</a> and broadcasts them to all the nodes used in the calculation.</li>
</ol>
<p>Through this process, a distributed small-world network is formed that roughly matches the physical relations between the nodes.</p>
<p>Note: This process is more complicated to account for measuring errors, inconsistencies between routing coordinate networks and other potential problems.</p>
<h2 id="routing-coordinates"><a class="header" href="#routing-coordinates">Routing Coordinates</a></h2>
<p>Routing coordinates in this system acts as a replacement to IP addresses. A packet coupled with a routing coordinate can be routed to its destination by each node along the path comparing its own coordinate to the coordinate on the packet to figure out in which direction in the network (and by extension, which node) the packet should travel to next. This is way better for a peer-to-peer application because you don't need global routing tables or complicated peering and address space allocation protocols (like the existing internet). Routing coordinates are pretty much infinitely scalable. </p>
<p>That said, routing coordinates on their own give away <em>more</em> information than traditional IP addresses do. Since the self-organized networks that routing coordinates are used in reflect real-world network topologies, just knowing someone's routing coordinate could be akin to knowing what block they live on. This is acceptable because it is much easier to do efficient onion routing on networks with routing coordinates which means that the majority of connections will be onion routed, providing better privacy overall.</p>
<p>Other benefits of routing coordinates are that they have the potential to almost completely prevent denial-of-service attacks. To even attempt such an attack, the attacker must find the routing coordinate or IP address of their target, which is essentially impossible unless the target specifically shared their coordinates publically for some reason. Even if the attacker does have the routing coordinate, trying to DOS a routing coordinate is like trying to DOS the entire expanse of network between the attacker and the target, the attacker(s) will be ineffective or blocked automatically for overuse of the network. Even distributed denial of service attacks can be mitigated with additions to the protocol allowing the victim to notify the network that they are being attacked and to rate limit the attackers.</p>
<h2 id="anonymous-routing-onions-garlic-and-all-the-others"><a class="header" href="#anonymous-routing-onions-garlic-and-all-the-others">Anonymous Routing (Onions, Garlic, and all the others...)</a></h2>
<p>Conventionally, anonymous routing is an incredibly slow ordeal because of how intermediate peers are selected from the network. Due to this inefficiency, onion routing protocols have been somewhat limited in what kind of privacy they can provide because of usability being a concern. This is no longer the case with DBR, which may support all kinds of anonymous routing schemes:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Onion_routing">Onion Routing</a>
<ul>
<li>The simplest routing of them all. Simply select a list of peers and establish a route from beginning to end.</li>
</ul>
</li>
<li>Garlic Routing
<ul>
<li>Similar to onion routing, but when sending packets to multiple peers at once, send them together for them to be split apart at some mid-point in the path.</li>
</ul>
</li>
<li>Multi-path routing
<ul>
<li>Maintain multiple Onion routes throughout the network and randomly send packets along all or some subset of them.</li>
</ul>
</li>
<li>Pool Routing
<ul>
<li>Create a group that nodes can join. All nodes randomly send randomly-sized data packets to all other nodes at random intervals, sending real data (padded) if there is data to send and sending random bytes if not.</li>
</ul>
</li>
</ul>
<p>DBR plans to use a modification of the <a href="https://arxiv.org/abs/1507.05724v3">HORNET</a> protocol for setting up fast onion-routed links.</p>
<h2 id="conflicting-coordinate-spaces"><a class="header" href="#conflicting-coordinate-spaces">Conflicting Coordinate Spaces</a></h2>
<p>It is possible, (although unlikely) for two or more incompatible latency topologies to be formed independently in separate places and then come together later. A solution to this problem is still in the works, but it is likely the solution will come from the principle <a href="https://en.wikipedia.org/wiki/Synchronization_of_chaos">synchronization of chaos</a>.</p>
<p>A system built on synchronization might work by which as the two networks start to grow close and share nodes that can't resolve an accurate routing coordinate between the two conflicting spaces, it sets off a chain reaction through which the conflicted nodes &quot;poison&quot; other nodes to recalculate their coordinate spaces which creates a new coordinate space merging the two old ones (or one gets subsumed into the other).</p>
<h2 id="bandwidth-trading"><a class="header" href="#bandwidth-trading">Bandwidth Trading</a></h2>
<p>Routing protocols that rely on the goodwill of peers to allow others to use their bandwidth to route packets typically have only a small number of willing peers to route packets (i.e.: TOR). This is why protocols like BitTorrent, I2P and IPFS have systems in place that incentivize peers to play fair and contribute back to the network.</p>
<p>To accomplish this behavior for DBR there needs to be some kind of way to limit packets going through nodes that either don't use the network that much or don't have a lot of bandwidth capacity. Also to take into consideration are the management of nodes that have inconsistent uptime or inconsistent routing.</p>
<p>Lets analyze the situation:</p>
<ul>
<li>Each node is a pipe and a water pump.</li>
<li>The pipe is sometimes closed and has a set max amount of water that can flow. The pipe also doesn't want to be overused.</li>
<li>The pump sometimes pumps water down various other pipes. This water should always reach its end destination taking various twists and turns throughout the network of pipes.</li>
</ul>
<p>The goal:</p>
<ul>
<li>Each node wants as little water as possible to flow through their pipe, but as much water as possible to flow out of their pump through other people's pipes, and nodes want a diverse selection of pipes (for anonymity).</li>
</ul>
<p>Ideas:</p>
<ul>
<li>Each node keeps track of the amount of water (bytes) flowing through its pipe from nearby pumps.</li>
<li>Each node's pump only sends water through pipes it knows it has received water from.</li>
<li>There is more to theorize about here for future research :)</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../dither/structure.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../dither/routing/directional-trail-search.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../dither/structure.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../dither/routing/directional-trail-search.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
